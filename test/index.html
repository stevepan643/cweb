<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>HTTP 接口测试</title>
</head>
<body>
<h1>接口测试页面</h1>

<label>接口 URL: 
  <select id="url">
    <option value="/test_get">/test_get</option>
    <option value="/test_post">/test_post</option>
    <option value="/test_put">/test_put</option>
    <option value="/test_delete">/test_delete</option>
  </select>
</label><br><br>

<label>HTTP 方法:
  <select id="method">
    <option value="GET">GET</option>
    <option value="POST">POST</option>
    <option value="PUT">PUT</option>
    <option value="DELETE">DELETE</option>
  </select>
</label><br><br>

<label>请求数据 (JSON 格式):<br>
<textarea id="data" rows="5" cols="50">{}</textarea>
</label><br><br>

<button onclick="sendRequest()">发送请求</button>

<h2>返回结果：</h2>
<pre id="response"></pre>

<script>
async function sendRequest() {
    const path = document.getElementById('url').value;
    const method = document.getElementById('method').value;
    let body = document.getElementById('data').value;

    let options = { method };

    if (method !== 'GET' && body) {
        try {
            options.body = JSON.stringify(JSON.parse(body));
        } catch (e) {
            document.getElementById('response').textContent = "请求数据不是合法 JSON";
            return;
        }
        options.headers = { 'Content-Type': 'application/json' };
    }

    try {
        const res = await fetch(path, options);
        const text = await res.text();
        document.getElementById('response').textContent = `状态: ${res.status}\n\n${text}`;
    } catch (err) {
        document.getElementById('response').textContent = '请求失败：' + err;
    }
}
</script>
</body>
</html>
